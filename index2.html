<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.5, maximum-scale=3.0">
    <title>Jogo da Memória</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
            touch-action: manipulation;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1, h2 {
            color: #006400;
            text-align: center;
        }
        .main-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ccc;
            flex-wrap: wrap;
            justify-content: center;
        }
        .main-tabs .tab {
            padding: 10px 15px;
            cursor: pointer;
            background: #f1f1f1;
            border: 1px solid #ccc;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        .main-tabs .tab.active {
            background: #006400;
            color: white;
        }
        .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
            background: white;
            border-radius: 0 0 5px 5px;
            width: 100%;
            max-width: 400px;
        }
        .tab-content.active {
            display: block;
        }
        #jogo {
            display: grid;
            gap: 8px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 400px;
        }
        .carta {
            width: 100%;
            height: 0;
            padding-bottom: 100%;
            background: #006400;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 5px;
            border: 1px solid #1E90FF;
            transition: transform 0.3s, opacity 0.5s;
            opacity: 0;
            transform: translateY(100px);
        }
        .carta.subir {
            opacity: 1;
            transform: translateY(0);
            transition: transform 0.5s ease-out, opacity 0.5s ease-out;
        }
        .carta.virada {
            background: #90EE90;
            transform: rotateY(180deg);
        }
        .carta.combinada {
            background: #ADD8E6;
            cursor: default;
        }
        .carta img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            border-radius: 5px;
            position: absolute;
            top: 0;
            left: 0;
        }
        .carta.virada img {
            display: block;
        }
        #game-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-bottom: 20px;
            width: 100%;
            max-width: 400px;
        }
        #stats {
            text-align: left;
            width: 100%;
        }
        #acertos, #progresso, #tolerancia-erros, #timer, #elapsed-timer {
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        #progresso {
            color: #FF4500;
            font-weight: bold;
        }
        #ranking-link {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }
        #ranking-link a {
            color: #0000FF;
            font-weight: bold;
            text-decoration: none;
            font-size: 1.2em;
        }
        #contagem-regressiva {
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #006400;
            display: none;
            width: 100%;
        }
        #botoes-jogo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 400px;
        }
        .button-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }
        #iniciar, #reiniciar, #salvar, #carregar {
            padding: 8px 16px;
            background-color: #006400;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            width: 100px;
        }
        #iniciar:disabled, #nivel-dificuldade:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #audio-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            width: 100%;
            font-size: 1.5em;
            color: #006400;
        }
        #musica-prev, #musica-play-pause, #musica-next, #som-controle {
            cursor: pointer;
        }
        #som-controle {
            font-size: 1.2em;
            position: relative;
        }
        #som-controle.desligado {
            color: #666;
        }
        #som-controle.desligado::after {
            content: '✕';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.8em;
            color: #666;
            font-weight: bold;
        }
        #dificuldade {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }
        #dificuldade label {
            font-weight: bold;
            color: #0000FF;
        }
        #dificuldade select {
            padding: 5px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 100%;
            max-width: 200px;
        }
        #nome-jogador {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }
        #nome-jogador label {
            display: block;
            font-weight: bold;
            color: #0000FF;
            margin-bottom: 5px;
        }
        #nome-jogador input {
            padding: 5px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 100%;
            max-width: 200px;
        }
        #imagem-principal {
            display: block;
            width: 100%;
            max-width: 400px;
            height: auto;
            margin: 0 auto 20px;
            border-radius: 10px;
        }
        #music-track-image {
            display: block;
            width: 100%;
            max-width: 400px;
            height: auto;
            margin: 0 auto 20px;
            border-radius: 10px;
        }
        #equalizer {
            width: 100%;
            max-width: 400px;
            height: 60px;
            background: #000;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            border-radius: 5px;
            margin: 10px auto;
            padding: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: none;
        }
        #equalizer.active {
            display: flex;
        }
        .bar {
            width: 8px;
            height: 10px;
            background: linear-gradient(to top, #00FF00, #1E90FF);
            border-radius: 4px;
            box-shadow: 0 0 5px rgba(0, 255, 0, 0.7);
            animation: pulse 1s infinite;
        }
        .bar:nth-child(2) { animation-delay: 0.1s; }
        .bar:nth-child(3) { animation-delay: 0.2s; }
        .bar:nth-child(4) { animation-delay: 0.3s; }
        .bar:nth-child(5) { animation-delay: 0.4s; }
        .bar:nth-child(6) { animation-delay: 0.5s; }
        .bar:nth-child(7) { animation-delay: 0.6s; }
        .bar:nth-child(8) { animation-delay: 0.7s; }
        .bar:nth-child(9) { animation-delay: 0.8s; }
        .bar:nth-child(10) { animation-delay: 0.9s; }
        @keyframes pulse {
            0% { height: 10px; }
            50% { height: 50px; }
            100% { height: 10px; }
        }
        .social-media {
            margin: 20px 0;
        }
        .social-media h3 {
            color: #006400;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .social-media a {
            text-decoration: none;
            color: #006400;
        }
        .social-media p {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
        }
        .social-media i {
            color: #006400;
            font-size: 1.2em;
        }
        .links-list {
            margin: 20px 0;
            list-style: none;
            padding: 0;
        }
        .links-list li {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
        }
        .links-list a {
            text-decoration: none;
            color: #006400;
            font-weight: bold;
        }
        .links-list i {
            color: #006400;
            font-size: 1.2em;
        }
        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }
        .contact-form input, .contact-form textarea {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .contact-form button {
            background-color: #006400;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
        }
        .copyright {
            text-align: center;
            margin-top: 30px;
            color: #666;
        }
        .copyright a {
            text-decoration: none;
            color: #006400;
            font-weight: bold;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .tab-content {
                padding: 10px;
            }
            #jogo {
                gap: 6px;
            }
            #iniciar, #reiniciar, #salvar, #carregar {
                width: 90px;
                font-size: 0.8em;
            }
            #audio-controls {
                flex-direction: row;
                gap: 12px;
            }
            #dificuldade select, #nome-jogador input {
                max-width: 180px;
            }
        }
    </style>
</head>
<body>
    <h1>Jogo da Memória</h1>
    
    <div class="main-tabs">
        <div class="tab active" onclick="openTab(event, 'jogo-tab')">Jogo</div>
        <div class="tab" onclick="openTab(event, 'ranking-tab')">Ranking</div>
        <div class="tab" onclick="openTab(event, 'contato')">Contato</div>
        <div class="tab" onclick="openTab(event, 'ekpb')">EKPB Digital Music ©</div>
        <div class="tab" onclick="openTab(event, 'instrucoes')">Instruções</div>
    </div>
    
    <div id="jogo-tab" class="tab-content active">
        <img id="imagem-principal" src="https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/jepp1.jpg" alt="Imagem Principal">
        <div id="dificuldade">
            <label for="nivel-dificuldade">NÍVEL DE DIFICULDADE:</label>
            <select id="nivel-dificuldade">
                <option value="facil">Fácil (8 pares, 3s)</option>
                <option value="medio">Médio (10 pares, 6s)</option>
                <option value="dificil">Difícil (12 pares, 15s)</option>
            </select>
        </div>
        <div id="nome-jogador">
            <label>SEU NOME</label>
            <input type="text" id="player-name" placeholder="Digite seu nome">
        </div>
        <div id="botoes-jogo">
            <div class="button-group">
                <button id="iniciar" onclick="startGame()" disabled>INICIAR</button>
                <button id="reiniciar" onclick="inicializarJogo()">REINICIAR</button>
            </div>
            <div class="button-group">
                <button id="salvar" onclick="salvarJogo()">SALVAR</button>
                <button id="carregar" onclick="carregarJogo()">CARREGAR</button>
            </div>
            <div id="audio-controls">
                <span id="musica-prev" onclick="playPreviousMusic()">⏮</span>
                <span id="musica-play-pause" onclick="toggleMusic()">▶</span>
                <span id="musica-next" onclick="playNextMusic()">⏭</span>
                <i id="som-controle" class="fas fa-volume-up" onclick="toggleSomCartas()" title="Ligar/Desligar Som das Cartas"></i>
            </div>
        </div>
        <div id="game-info">
            <div id="stats">
                <div id="acertos">Acertos: 0</div>
                <div id="progresso">Progresso: 0%</div>
                <div id="tolerancia-erros">Tolerância de erros: 10</div>
                <div id="timer">Tempo Restante: 60.000</div>
                <div id="elapsed-timer">Tempo Decorrido: 00.000</div>
            </div>
        </div>
        <div id="ranking-link">
            <a href="#" onclick="openTab(event, 'ranking-tab')">RANKING</a>
        </div>
        <div id="equalizer">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <img id="music-track-image" src="https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/img_mp3/musical1.jpg" alt="Faixa Musical">
        <div id="contagem-regressiva"></div>
        <div id="jogo">
            <!-- Cartas serão geradas via JavaScript -->
        </div>
    </div>
    
    <div id="ranking-tab" class="tab-content">
        <h2>Ranking</h2>
        <table id="ranking-table">
            <thead>
                <tr>
                    <th>Posição</th>
                    <th>Nome</th>
                    <th>Nível</th>
                    <th>Mov</th>
                    <th>Erros</th>
                    <th>Tempo</th>
                </tr>
            </thead>
            <tbody id="ranking-list">
                <tr>
                    <td>1</td>
                    <td>Ana Silva</td>
                    <td>Fácil</td>
                    <td>12</td>
                    <td>3</td>
                    <td>45.123</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>João Pereira</td>
                    <td>Médio</td>
                    <td>18</td>
                    <td>5</td>
                    <td>72.456</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Maria Oliveira</td>
                    <td>Difícil</td>
                    <td>25</td>
                    <td>10</td>
                    <td>150.789</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Carlos Souza</td>
                    <td>Fácil</td>
                    <td>15</td>
                    <td>4</td>
                    <td>50.234</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Beatriz Lima</td>
                    <td>Médio</td>
                    <td>20</td>
                    <td>6</td>
                    <td>85.567</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div id="contato" class="tab-content">
        <h2>Contato</h2>
        <div class="contact-form">
            <input type="text" placeholder="Nome" id="nome">
            <input type="email" placeholder="Email" id="email">
            <textarea placeholder="Mensagem" id="mensagem" rows="5"></textarea>
            <button onclick="enviarMensagem()">Enviar</button>
        </div>
        <div class="social-media">
            <h3>EKPB Digital Music ©</h3>
            <p><strong>Siga-nos nas Redes Sociais:</strong></p>
            <p><i class="fab fa-instagram"></i> Instagram: <a href="https://instagram.com/ekpbdigitalmusic" target="_blank">@ekpbdigitalmusic</a></p>
            <p><i class="fab fa-youtube"></i> YouTube: <a href="https://youtube.com/@ekpbdigitalmusic" target="_blank">@ekpbdigitalmusic</a></p>
            <p><i class="fab fa-tiktok"></i> TikTok: <a href="https://tiktok.com/@ekpbdigitalmusic" target="_blank">@ekpbdigitalmusic</a></p>
            <p><i class="fas fa-video"></i> Kwai: <a href="https://kwai.com/@ekpbdigitalmusic" target="_blank">@ekpbdigitalmusic</a></p>
            <p><i class="fas fa-envelope"></i> Email: <a href="/cdn-cgi/l/email-protection#c7a2acb7a5a3aea0aeb3a6abaab2b4aea487a0aaa6aeabe9a4a8aa"><span class="__cf_email__" data-cfemail="eb8e809b898f828c829f8a87869e988288ab8c868a8287c5888486">[email protected]</span></a></p>
            <p><strong>Compositor</strong></p>
            <p><i class="fab fa-instagram"></i> Instagram: <a href="https://instagram.com/edsonk.palacio" target="_blank">@edsonk.palacio</a></p>
            <p><i class="fab fa-youtube"></i> YouTube: <a href="https://youtube.com/@edsonkpalacioo" target="_blank">@edsonkpalacioo</a></p>
            <p><i class="fab fa-tiktok"></i> TikTok: <a href="https://tiktok.com/@edsonkpalacio" target="_blank">@edsonkpalacio</a></p>
            <p><i class="fas fa-video"></i> Kwai: <a href="https://kwai.com/@edsonkpalacio" target="_blank">@edsonkpalacio</a></p>
            <p><i class="fas fa-envelope"></i> Email: <a href="/cdn-cgi/l/email-protection#a4c1c0d7cbcad4c5c8c5c7cdcbe4c3c9c5cdc88ac7cbc9"><span class="__cf_email__" data-cfemail="044120372b2a34252825272d2b042329252d286a272b29">[email protected]</span></a></p>
            <p><i class="fab fa-whatsapp"></i> Cel: <a href="https://wa.me/5588996812029" target="_blank">(88) 99681-2029</a></p>
        </div>
    </div>
    
    <div id="ekpb" class="tab-content">
        <h2>EKPB Digital Music ©</h2>
        <ul class="links-list">
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=AZ0mhfobGDc" target="_blank">Sobre Esta Pedra</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.letras.mus.br/ekpb-digital-music/amor-de-pai-e-filho-grandes-amigos/" target="_blank">Amor de Pai e Filho Grandes Amigos</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=nKxcs" target="_blank">Vicent's Churrascaria</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=pyAn-MI0spg" target="_blank">Joker Tecnologia</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=Csu2ZmEYxjk" target="_blank">Mãe da Igreja Mãe do Amor</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=a7QLC03pRug" target="_blank">Kauan Lugar Feito Para Você</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=i-11gRpD2iE" target="_blank">Vita Gula - Um Hit No Lar</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=O-DbYY9Q6J8" target="_blank">Vita Gula - Um Hit No Lar Hit</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=pnodRjA3cYc" target="_blank">Mother of the Church, Mother of Love</a></li>
            <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/watch?v=ExRj-zwmnk" target="_blank">Aleatory Family</a></li>
        </ul>
        <div class="social-media">
            <h3>Canais no YouTube</h3>
            <p><i class="fab fa-youtube"></i> <a href="https://youtube.com/@ekpbdigitalmusic" target="_blank">@ekpbdigitalmusic</a></p>
            <p><i class="fab fa-youtube"></i> <a href="https://youtube.com/@edsonkpalacio" target="_blank">@edsonkpalacio</a></p>
            <p><i class="fab fa-youtube"></i> <a href="https://youtube.com/@edsonkpalacioo" target="_blank">@edsonkpalacioo</a></p>
        </div>
    </div>
    
    <div id="instrucoes" class="tab-content">
        <h2>Instruções de Uso</h2>
        <p>Bem-vindo(a) ao Jogo da Memória! Este jogo é simples e divertido, projetado para testar sua memória e concentração. Abaixo, você encontrará as instruções para jogar:</p>
        
        <h3>Como Jogar</h3>
        <ul>
            <li><strong>Regras Importantes:</strong>
                <ul>
                    <li>1 - Não fotografar a tela.</li>
                    <li>2 - Não fazer print.</li>
                </ul>
            </li>
            <li><strong>Escolha o Nível de Dificuldade:</strong> Antes de começar, selecione o nível de dificuldade (Fácil, Médio ou Difícil) no menu suspenso. Isso determinará o número de cartas, o tempo de exposição inicial e o tempo limite:
                <ul>
                    <li><strong>Fácil:</strong> 8 pares (16 cartas), 3 segundos de exposição inicial, 60 segundos de jogo, 10 erros máximos.</li>
                    <li><strong>Médio:</strong> 10 pares (20 cartas), 6 segundos de exposição inicial, 90 segundos de jogo, 15 erros máximos.</li>
                    <li><strong>Difícil:</strong> 12 pares (24 cartas), 15 segundos de exposição inicial, 180 segundos de jogo, 30 erros máximos.</li>
                </ul>
                Após iniciar o jogo, o nível de dificuldade ficará bloqueado. Para mudar o nível, finalize o jogo (vencendo ou perdendo) ou clique em "REINICIAR".
            </li>
            <li><strong>Iniciar o Jogo:</strong> Digite seu nome no campo "SEU NOME". Clique em qualquer parte da tela (exceto no menu de dificuldade ou ícones de som) para focar no campo de nome. Em seguida, clique no botão "INICIAR". Você só pode clicar em "INICIAR" uma vez por partida. Para iniciar um novo jogo, finalize o atual (vencendo ou perdendo) ou clique em "REINICIAR". Após clicar em "INICIAR", as cartas irão subir, o tabuleiro será centralizado na tela, e as cartas serão viradas por um curto período (dependendo do nível de dificuldade) para que você as memorize. Um som de início será tocado, e uma contagem regressiva será exibida. Após isso, as cartas serão desviradas automaticamente, e o temporizador de jogo começará. Uma música instrumental suave começará a tocar ao iniciar o jogo, e um painel de equalizador vibrante será exibido.</li>
            <li><strong>Controle de Áudio:</strong> Use os controles ao lado dos botões para ajustar o áudio:
                <ul>
                    <li><i class="fas fa-hand-pointer"></i> Clique em ⏮ para tocar a música anterior na playlist.</li>
                    <li><i class="fas fa-hand-pointer"></i> Clique em ▶ para tocar ou ⏸ para pausar a música de fundo. A música é uma instrumental suave que toca continuamente durante o jogo. Quando a música estiver tocando, o painel de equalizador será exibido e animado.</li>
                    <li><i class="fas fa-hand-pointer"></i> Clique em ⏭ para tocar a próxima música na playlist. Se não houver mais músicas, a playlist volta para a primeira faixa (musical1).</li>
                    <li><i class="fas fa-volume-up"></i> Liga/desliga os sons das cartas e ações (como virar carta, erros, acertos, som de início, "GAME OVER" e aplausos na vitória). Quando desativado, o ícone fica cinza com um "✕" sobreposto.</li>
                    <li>Um som de clique leve será reproduzido ao clicar em qualquer parte da página, exceto onde outros sons já estão associados (como cartas e botões).</li>
                </ul>
            </li>
            <li><strong>Objetivo:</strong> Encontre todos os pares de imagens iguais dentro do tempo limite e com um número limitado de erros, dependendo do nível:
                <ul>
                    <li><strong>Fácil:</strong> 60 segundos, máximo de 10 erros.</li>
                    <li><strong>Médio:</strong> 90 segundos, máximo de 15 erros.</li>
                    <li><strong>Difícil:</strong> 180 segundos, máximo de 30 erros.</li>
                </ul>
            </li>
            <li><strong>Passo a Passo:</strong>
                <ul>
                    <li>Clique em uma carta para virá-la e revelar a imagem escondida.</li>
                    <li>Clique em uma segunda carta para tentar encontrar o par correspondente.</li>
                    <li>Se as duas imagens forem iguais, elas permanecerão viradas e você encontrou um par! Um som específico será tocado, o número de acertos e o progresso serão atualizados.</li>
                    <li>Se forem diferentes, as cartas serão viradas para baixo novamente, e o número de erros será incrementado.</li>
                    <li>Continue até encontrar todos os pares ou até o tempo acabar ou atingir o limite de erros.</li>
                </ul>
            </li>
            <li><strong>Movimentos:</strong> O número de movimentos é contado a cada par de cartas que você vira.</li>
            <li><strong>Erros:</strong> Se você atingir o limite de erros para o nível escolhido, o jogo termina com "GAME OVER - Tente novamente". Um som de "GAME OVER" será tocado.</li>
            <li><strong>Tempo:</strong> Você tem um tempo limite para completar o jogo (mostrado como "Tempo Restante"), dependendo do nível. Se o tempo acabar, o jogo termina com "GAME OVER" e um som de "GAME OVER" será tocado. O "Tempo Decorrido" mostra quanto tempo você levou jogando.</li>
            <li><strong>Vitória:</strong> Você vence quando todas as cartas forem combinadas. Um som de aplausos será tocado, um alerta será exibido parabenizando você, e sua pontuação será exibida.</li>
            <li><strong>Reiniciar:</strong> Clique no botão "REINICIAR" para começar uma nova partida a qualquer momento.</li>
            <li><strong>Salvar e Carregar:</strong> Clique em "SALVAR" para salvar o progresso do jogo. Clique em "CARREGAR" para retomar um jogo salvo anteriormente.</li>
        </ul>
        
        <h3>Dicas</h3>
        <ul>
            <li>Preste atenção às posições das cartas durante o período inicial para lembrar onde estão as imagens.</li>
            <li>Tente virar as cartas em pares para minimizar os movimentos e erros.</li>
            <li>Se precisar de ajuda ou quiser entrar em contato, vá até a aba "Contato".</li>
        </ul>
    </div>
    
    <div class="copyright">
         EKPB Digital Music © | Powered by <a href="https://ekpbdigitalmusic.my.canva.site/" target="_blank">Edson Palácio</a>
    </div>
    
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script>
        function openTab(evt, tabName) {
            const tabs = document.querySelectorAll('.main-tabs > .tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            
            if (evt.currentTarget) {
                evt.currentTarget.classList.add('active');
            } else {
                document.querySelector(`.tab[onclick*="${tabName}"]`).classList.add('active');
            }
            document.getElementById(tabName).classList.add('active');
        }

        const todasImagens = [
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta1.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta1.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta2.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta2.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta3.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta3.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta4.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta4.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta5.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta5.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta6.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta6.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta7.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta7.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta8.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta8.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta9.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta9.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta10.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta10.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta11.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta11.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta12.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta12.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta13.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta13.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta14.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta14.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta15.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/carta15.jpg'
        ];

        const playlist = [
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/musical1.mp3',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/musical2.mp3',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/musical3.mp3'
        ];

        const musicTrackImages = [
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/img_mp3/musical1.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/img_mp3/musical2.jpg',
            'https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/img/img_mp3/musical3.jpg'
        ];

        let imagens = [];
        let cartas = [];
        let primeiraCarta = null;
        let segundaCarta = null;
        let movimentos = 0;
        let erros = 0;
        let paresEncontrados = 0;
        let bloqueado = false;
        let jogoIniciado = false;
        let timerInterval = null;
        let timeRemaining = 60000;
        let elapsedTime = 0;
        let maxErros = 10;
        let playerName = '';
        let cardSound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/flip.mp3');
        let successSound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/yes_1.mp3');
        let errorSound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/no_4.mp3');
        let startSound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/start-game.mp3');
        let gameOverSound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/game-over.mp3');
        let applauseSound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/applause.mp3');
        let keySound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/tecla.mp3');
        let clickSound = new Audio('https://raw.githubusercontent.com/ekpb-cyborg/JEPP-GAME-MEMORIA/refs/heads/main/aud/click.mp3');
        let continuousMusic = null;
        let currentMusicIndex = 0;
        let somCartasLigado = true;
        let isMusicPlaying = false;

        cardSound.volume = 1.0;
        successSound.volume = 1.0;
        successSound.loop = false;
        errorSound.volume = 1.0;
        startSound.volume = 1.0;
        gameOverSound.volume = 1.0;
        applauseSound.volume = 1.0;
        keySound.volume = 0.5;
        clickSound.volume = 0.5;

        document.addEventListener('DOMContentLoaded', () => {
            const nameInput = document.getElementById('player-name');
            nameInput.addEventListener('input', checkPlayerName);
            nameInput.addEventListener('input', () => {
                if (somCartasLigado) {
                    keySound.currentTime = 0;
                    keySound.play().catch(err => console.error('Erro ao tocar som de tecla:', err));
                }
            });

            const nivelSelect = document.getElementById('nivel-dificuldade');
            nivelSelect.addEventListener('change', () => {
                if (jogoIniciado) {
                    alert('Finalize ou reinicie o jogo para mudar o nível de dificuldade.');
                    nivelSelect.value = nivelSelect.dataset.lastValue;
                } else {
                    nivelSelect.dataset.lastValue = nivelSelect.value;
                    inicializarJogo();
                }
            });
            nivelSelect.dataset.lastValue = nivelSelect.value;
        });

        document.addEventListener('click', (event) => {
            if (jogoIniciado) return;
            const target = event.target;
            if (target.closest('#player-name') ||
                target.closest('#iniciar') ||
                target.closest('#nivel-dificuldade') ||
                target.closest('#som-controle') ||
                target.closest('#musica-prev') ||
                target.closest('#musica-play-pause') ||
                target.closest('#musica-next')) {
                return;
            }
            document.getElementById('player-name').focus();
            if (somCartasLigado) {
                clickSound.currentTime = 0;
                clickSound.play().catch(err => console.error('Erro ao tocar som de clique:', err));
            }
        });

        function checkPlayerName() {
            const nameInput = document.getElementById('player-name');
            const startButton = document.getElementById('iniciar');
            playerName = nameInput.value.trim();
            startButton.disabled = playerName === '';
        }

        function formatTime(milliseconds) {
            const seconds = Math.floor(milliseconds / 1000);
            const millis = milliseconds % 1000;
            return `${seconds.toString().padStart(2, '0')}.${millis.toString().padStart(3, '0')}`;
        }

        function updateProgress() {
            const totalPares = imagens.length / 2;
            const progresso = Math.round((paresEncontrados / totalPares) * 100);
            document.getElementById('progresso').textContent = `Progresso: ${progresso}%`;
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            document.getElementById('timer').textContent = `Tempo Restante: ${formatTime(timeRemaining)}`;
            document.getElementById('elapsed-timer').textContent = `Tempo Decorrido: ${formatTime(elapsedTime)}`;
            timerInterval = setInterval(() => {
                if (!jogoIniciado) return;
                timeRemaining -= 10;
                elapsedTime += 10;
                document.getElementById('timer').textContent = `Tempo Restante: ${formatTime(timeRemaining)}`;
                document.getElementById('elapsed-timer').textContent = `Tempo Decorrido: ${formatTime(elapsedTime)}`;
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    if (somCartasLigado) {
                        gameOverSound.currentTime = 0;
                        gameOverSound.play().catch(() => console.log('Erro ao tocar som de GAME OVER'));
                    }
                    alert('GAME OVER! O tempo acabou.');
                    inicializarJogo();
                }
            }, 10);
        }

        function embaralhar(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function updateEqualizer() {
            const equalizer = document.getElementById('equalizer');
            if (isMusicPlaying) {
                equalizer.classList.add('active');
            } else {
                equalizer.classList.remove('active');
            }
        }

        function playNextMusic() {
            currentMusicIndex++;
            if (currentMusicIndex >= playlist.length) {
                currentMusicIndex = 0;
            }
            document.getElementById('music-track-image').src = musicTrackImages[currentMusicIndex];
            if (isMusicPlaying) {
                if (continuousMusic) {
                    continuousMusic.pause();
                    continuousMusic.currentTime = 0;
                }
                continuousMusic = new Audio(playlist[currentMusicIndex]);
                continuousMusic.loop = true;
                continuousMusic.volume = 0.5;
                continuousMusic.play().catch(err => console.error('Erro ao tocar música:', err));
            }
            updateEqualizer();
        }

        function playPreviousMusic() {
            currentMusicIndex--;
            if (currentMusicIndex < 0) {
                currentMusicIndex = playlist.length - 1;
            }
            document.getElementById('music-track-image').src = musicTrackImages[currentMusicIndex];
            if (isMusicPlaying) {
                if (continuousMusic) {
                    continuousMusic.pause();
                    continuousMusic.currentTime = 0;
                }
                continuousMusic = new Audio(playlist[currentMusicIndex]);
                continuousMusic.loop = true;
                continuousMusic.volume = 0.5;
                continuousMusic.play().catch(err => console.error('Erro ao tocar música:', err));
            }
            updateEqualizer();
        }

        function toggleMusic() {
            const playPauseButton = document.getElementById('musica-play-pause');
            if (isMusicPlaying) {
                isMusicPlaying = false;
                playPauseButton.textContent = '▶';
                if (continuousMusic) continuousMusic.pause();
            } else {
                isMusicPlaying = true;
                playPauseButton.textContent = '⏸';
                if (!continuousMusic || continuousMusic.src !== playlist[currentMusicIndex]) {
                    if (continuousMusic) {
                        continuousMusic.pause();
                        continuousMusic.currentTime = 0;
                    }
                    continuousMusic = new Audio(playlist[currentMusicIndex]);
                    continuousMusic.loop = true;
                    continuousMusic.volume = 0.5;
                }
                continuousMusic.play().catch(err => console.error('Erro ao tocar música contínua:', err));
            }
            updateEqualizer();
        }

        function inicializarJogo() {
            const nivel = document.getElementById('nivel-dificuldade').value;
            let numPares;

            if (nivel === 'facil') {
                numPares = 8; // 16 cartas
                timeRemaining = 60000;
                maxErros = 10;
            } else if (nivel === 'medio') {
                numPares = 10; // 20 cartas
                timeRemaining = 90000;
                maxErros = 15;
            } else {
                numPares = 12; // 24 cartas
                timeRemaining = 180000;
                maxErros = 30;
            }

            elapsedTime = 0;
            document.getElementById('tolerancia-erros').textContent = `Tolerância de erros: ${maxErros}`;
            document.getElementById('timer').textContent = `Tempo Restante: ${formatTime(timeRemaining)}`;
            document.getElementById('elapsed-timer').textContent = `Tempo Decorrido: ${formatTime(elapsedTime)}`;

            imagens = todasImagens.slice(0, numPares * 2);

            const jogo = document.getElementById('jogo');
            jogo.innerHTML = '';
            cartas = [];
            movimentos = 0;
            erros = 0;
            paresEncontrados = 0;
            primeiraCarta = null;
            segundaCarta = null;
            bloqueado = false;
            jogoIniciado = false;
            if (timerInterval) clearInterval(timerInterval);
            document.getElementById('acertos').textContent = `Acertos: ${paresEncontrados}`;
            document.getElementById('progresso').textContent = `Progresso: 0%`;
            document.getElementById('contagem-regressiva').style.display = 'none';
            document.getElementById('player-name').value = '';
            playerName = '';
            checkPlayerName();

            document.getElementById('nivel-dificuldade').disabled = false;

            const totalCartas = numPares * 2;
            const colunas = 4;
            const linhas = Math.ceil(totalCartas / colunas);
            jogo.style.gridTemplateColumns = `repeat(${colunas}, 1fr)`;
            jogo.style.gridTemplateRows = `repeat(${linhas}, auto)`;

            const imagensEmbaralhadas = embaralhar([...imagens]);
            imagensEmbaralhadas.forEach((imgSrc, idx) => {
                const carta = document.createElement('div');
                carta.className = 'carta';
                carta.dataset.imgSrc = imgSrc;
                carta.dataset.id = idx;

                const img = document.createElement('img');
                img.src = imgSrc;
                img.alt = 'Imagem da carta';
                carta.appendChild(img);

                carta.addEventListener('click', virarCarta);
                jogo.appendChild(carta);
                cartas.push(carta);
            });

            if (continuousMusic) {
                continuousMusic.pause();
                continuousMusic.currentTime = 0;
                isMusicPlaying = false;
                document.getElementById('musica-play-pause').textContent = '▶';
            }

            const somControle = document.getElementById('som-controle');
            somControle.className = 'fas fa-volume-up';
            if (!somCartasLigado) {
                somControle.classList.add('desligado');
            }

            currentMusicIndex = 0;
            document.getElementById('music-track-image').src = musicTrackImages[currentMusicIndex];
            updateEqualizer();
        }

        function startGame() {
            if (!playerName) {
                alert('Por favor, insira seu nome antes de iniciar o jogo.');
                return;
            }
            if (jogoIniciado) {
                alert('Finalize ou reinicie o jogo para iniciar novamente.');
                return;
            }
            alert('Regras:\n1 - Não fotografar a tela.\n2 - Não fazer print.\n3 - Esteja atento ao tempo.');
            if (somCartasLigado) {
                startSound.currentTime = 0;
                startSound.play().catch(() => console.log('Erro ao tocar som de início'));
            }

            document.getElementById('nivel-dificuldade').disabled = true;

            bloqueado = true;
            const nivel = document.getElementById('nivel-dificuldade').value;
            let tempoExposicao;

            if (nivel === 'facil') {
                tempoExposicao = 3000;
            } else if (nivel === 'medio') {
                tempoExposicao = 6000;
            } else {
                tempoExposicao = 15000;
            }

            isMusicPlaying = true;
            document.getElementById('musica-play-pause').textContent = '⏸';
            if (!continuousMusic || continuousMusic.src !== playlist[currentMusicIndex]) {
                if (continuousMusic) {
                    continuousMusic.pause();
                    continuousMusic.currentTime = 0;
                }
                continuousMusic = new Audio(playlist[currentMusicIndex]);
                continuousMusic.loop = true;
                continuousMusic.volume = 0.5;
            }
            continuousMusic.play().catch(err => console.error('Erro ao tocar música contínua:', err));
            updateEqualizer();

            cartas.forEach((carta, index) => {
                if (carta.style.visibility !== 'hidden') {
                    setTimeout(() => {
                        carta.classList.add('subir');
                    }, index * 50);
                }
            });

            setTimeout(() => {
                const jogo = document.getElementById('jogo');
                jogo.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, cartas.length * 50 + 100);

            cartas.forEach(carta => {
                if (!carta.classList.contains('combinada') && carta.style.visibility !== 'hidden') {
                    setTimeout(() => {
                        carta.classList.add('virada');
                    }, cartas.length * 50);
                }
            });

            const contagemDiv = document.getElementById('contagem-regressiva');
            contagemDiv.style.display = 'block';
            let segundosRestantes = Math.floor(tempoExposicao / 1000);
            contagemDiv.textContent = `Tempo restante: ${segundosRestantes}`;

            const intervalo = setInterval(() => {
                segundosRestantes--;
                if (segundosRestantes >= 0) {
                    contagemDiv.textContent = `Tempo restante: ${segundosRestantes}`;
                } else {
                    clearInterval(intervalo);
                    contagemDiv.style.display = 'none';
                    cartas.forEach(carta => {
                        if (!carta.classList.contains('combinada') && carta.style.visibility !== 'hidden') {
                            carta.classList.remove('virada');
                        }
                    });
                    bloqueado = false;
                    jogoIniciado = true;
                    elapsedTime = 0;
                    startTimer();
                }
            }, 1000);

            const somControle = document.getElementById('som-controle');
            somControle.className = 'fas fa-volume-up';
            if (!somCartasLigado) {
                somControle.classList.add('desligado');
            }
        }

        function toggleSomCartas() {
            somCartasLigado = !somCartasLigado;
            const somControle = document.getElementById('som-controle');
            somControle.className = 'fas fa-volume-up';
            if (!somCartasLigado) {
                cardSound.pause();
                successSound.pause();
                errorSound.pause();
                startSound.pause();
                gameOverSound.pause();
                applauseSound.pause();
                clickSound.pause();
                keySound.pause();
                somControle.classList.add('desligado');
            } else {
                somControle.classList.remove('desligado');
            }
        }

        function virarCarta() {
            if (!jogoIniciado) {
                alert("É necessário primeiro inserir o nome do jogador e clicar em INICIAR.");
                return;
            }
            if (bloqueado || this.classList.contains('virada') || this.classList.contains('combinada') || this.style.visibility === 'hidden') return;

            if (somCartasLigado) {
                cardSound.currentTime = 0;
                cardSound.play().catch(() => console.log('Erro ao tocar som da carta'));
            }

            this.classList.add('virada');

            if (!primeiraCarta) {
                primeiraCarta = this;
            } else {
                segundaCarta = this;
                movimentos++;
                if (primeiraCarta.dataset.imgSrc === segundaCarta.dataset.imgSrc) {
                    primeiraCarta.classList.add('combinada');
                    segundaCarta.classList.add('combinada');
                    paresEncontrados++;
                    document.getElementById('acertos').textContent = `Acertos: ${paresEncontrados}`;
                    updateProgress();
                    if (somCartasLigado) {
                        successSound.currentTime = 0;
                        successSound.play().catch(() => console.log('Erro ao tocar som de acerto'));
                    }
                    resetarSelecao();

                    if (paresEncontrados === imagens.length / 2) {
                        clearInterval(timerInterval);
                        if (somCartasLigado) {
                            applauseSound.currentTime = 0;
                            applauseSound.play().catch(() => console.log('Erro ao tocar som de aplausos'));
                        }
                        setTimeout(() => {
                            alert(`Parabéns! Você venceu em ${movimentos} movimentos com ${erros} erros e ${formatTime(elapsedTime)} de jogo!`);
                            inicializarJogo();
                        }, 500);
                    }
                } else {
                    erros++;
                    if (somCartasLigado) {
                        errorSound.currentTime = 0;
                        errorSound.play().catch(() => console.log('Erro ao tocar som de erro'));
                    }
                    if (erros >= maxErros) {
                        clearInterval(timerInterval);
                        if (somCartasLigado) {
                            gameOverSound.currentTime = 0;
                            gameOverSound.play().catch(() => console.log('Erro ao tocar som de GAME OVER'));
                        }
                        setTimeout(() => {
                            alert('GAME OVER - Tente novamente');
                            inicializarJogo();
                        }, 500);
                        return;
                    }
                    bloqueado = true;
                    setTimeout(() => {
                        primeiraCarta.classList.remove('virada');
                        segundaCarta.classList.remove('virada');
                        resetarSelecao();
                        bloqueado = false;
                    }, 1000);
                }
            }
        }

        function resetarSelecao() {
            primeiraCarta = null;
            segundaCarta = null;
        }

        function salvarJogo() {
            if (!jogoIniciado) {
                alert('Inicie o jogo antes de salvar.');
                return;
            }

            const gameState = {
                imagens: imagens,
                cartas: cartas.map(carta => ({
                    imgSrc: carta.dataset.imgSrc,
                    id: carta.dataset.id,
                    isFlipped: carta.classList.contains('virada'),
                    isMatched: carta.classList.contains('combinada'),
                    isHidden: carta.style.visibility === 'hidden'
                })),
                primeiraCarta: primeiraCarta ? primeiraCarta.dataset.id : null,
                segundaCarta: segundaCarta ? segundaCarta.dataset.id : null,
                movimentos: movimentos,
                erros: erros,
                paresEncontrados: paresEncontrados,
                bloqueado: bloqueado,
                jogoIniciado: jogoIniciado,
                timeRemaining: timeRemaining,
                elapsedTime: elapsedTime,
                maxErros: maxErros,
                playerName: playerName,
                nivel: document.getElementById('nivel-dificuldade').value,
                currentMusicIndex: currentMusicIndex,
                isMusicPlaying: isMusicPlaying
            };

            localStorage.setItem('memoryGameState', JSON.stringify(gameState));
            alert('Jogo salvo com sucesso!');
        }

        function carregarJogo() {
            const savedState = localStorage.getItem('memoryGameState');
            if (!savedState) {
                alert('Nenhum jogo salvo encontrado.');
                return;
            }

            const gameState = JSON.parse(savedState);

            imagens = gameState.imagens;
            movimentos = gameState.movimentos;
            erros = gameState.erros;
            paresEncontrados = gameState.paresEncontrados;
            bloqueado = gameState.bloqueado;
            jogoIniciado = gameState.jogoIniciado;
            timeRemaining = gameState.timeRemaining;
            elapsedTime = gameState.elapsedTime;
            maxErros = gameState.maxErros;
            playerName = gameState.playerName;
            currentMusicIndex = gameState.currentMusicIndex;
            isMusicPlaying = gameState.isMusicPlaying;

            document.getElementById('nivel-dificuldade').value = gameState.nivel;
            document.getElementById('nivel-dificuldade').disabled = true;
            document.getElementById('player-name').value = playerName;
            document.getElementById('acertos').textContent = `Acertos: ${paresEncontrados}`;
            document.getElementById('progresso').textContent = `Progresso: ${Math.round((paresEncontrados / (imagens.length / 2)) * 100)}%`;
            document.getElementById('tolerancia-erros').textContent = `Tolerância de erros: ${maxErros}`;
            document.getElementById('timer').textContent = `Tempo Restante: ${formatTime(timeRemaining)}`;
            document.getElementById('elapsed-timer').textContent = `Tempo Decorrido: ${formatTime(elapsedTime)}`;

            const jogo = document.getElementById('jogo');
            jogo.innerHTML = '';
            cartas = [];

            const totalCartas = imagens.length;
            const colunas = 4;
            const linhas = Math.ceil(totalCartas / colunas);
            jogo.style.gridTemplateColumns = `repeat(${colunas}, 1fr)`;
            jogo.style.gridTemplateRows = `repeat(${linhas}, auto)`;

            gameState.cartas.forEach((cartaState, idx) => {
                const carta = document.createElement('div');
                carta.className = 'carta';
                carta.dataset.imgSrc = cartaState.imgSrc;
                carta.dataset.id = cartaState.id;
                if (cartaState.isFlipped) carta.classList.add('virada');
                if (cartaState.isMatched) carta.classList.add('combinada');
                if (cartaState.isHidden) carta.style.visibility = 'hidden';

                const img = document.createElement('img');
                img.src = cartaState.imgSrc;
                img.alt = 'Imagem da carta';
                carta.appendChild(img);

                carta.addEventListener('click', virarCarta);
                jogo.appendChild(carta);
                cartas.push(carta);
            });

            primeiraCarta = gameState.primeiraCarta ? cartas.find(c => c.dataset.id === gameState.primeiraCarta) : null;
            segundaCarta = gameState.segundaCarta ? cartas.find(c => c.dataset.id === gameState.segundaCarta) : null;

            if (jogoIniciado) {
                startTimer();
            }

            document.getElementById('music-track-image').src = musicTrackImages[currentMusicIndex];
            document.getElementById('musica-play-pause').textContent = isMusicPlaying ? '⏸' : '▶';
            if (isMusicPlaying) {
                if (continuousMusic) {
                    continuousMusic.pause();
                    continuousMusic.currentTime = 0;
                }
                continuousMusic = new Audio(playlist[currentMusicIndex]);
                continuousMusic.loop = true;
                continuousMusic.volume = 0.5;
                continuousMusic.play().catch(err => console.error('Erro ao tocar música:', err));
            }
            updateEqualizer();

            alert('Jogo carregado com sucesso!');
        }

        function enviarMensagem() {
            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const mensagem = document.getElementById('mensagem').value;
            if (nome && email && mensagem) {
                alert('Mensagem enviada com sucesso! Entraremos em contato em breve.');
                document.getElementById('nome').value = '';
                document.getElementById('email').value = '';
                document.getElementById('mensagem').value = '';
            } else {
                alert('Por favor, preencha todos os campos.');
            }
        }

        inicializarJogo();
    </script>
</body>
</html>
